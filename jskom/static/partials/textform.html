<div class="jskomTextForm">
  <ul class="nav nav-tabs">
    <li ng-class="isTabActive('simple')">
      <a data-target="#simple" data-toggle="tab">Simple</a>
    </li>
    <li ng-class="isTabActive('advanced')">
      <a data-target="#advanced" data-toggle="tab">Complete</a>
    </li>
  </ul>
  
  <div class="tab-content">
    
    <div class="tab-pane" id="simple" ng-class="isTabActive('simple')">
      <div ng-repeat="commentTo in text.comment_to_list">
        <span>
          <span class="jskomCapitalize">{{ commentTo.type }}</span>
          to: 
        </span>
        <em>{{ commentTo.text_no }}</em>
      </div>
      
      <div ng-repeat="recipient in text.recipient_list">
        <span class="jskomCapitalize">{{ recipient.type }}:</span>
        <em>{{ recipient.recpt|confName }}</em>
      </div>
      
      <span>Subject:</span> <em>{{ text.subject }}</em>
    </div>
    
    <div class="tab-pane" id="advanced" ng-class="isTabActive('advanced')">
      <div ng-repeat="commentTo in text.comment_to_list">
        <fieldset class="row form-inline">
          <div class="span8 jskomCommentType">
            <select class="span2" ng-model="commentTo.type"
                    ng-options="ct.type as ct.name for ct in commentTypes"></select>
            to
            <input type="text" class="span2" ng-model="commentTo.text_no" />
          </div>
        </fieldset>
      </div>
      
      <p/>
      
      <label>Recipients</label>
      
      <div ng-repeat="recipient in text.recipient_list">
        <fieldset class="row form-inline">
          <div class="span8">
            <button class="btn btn-small btn-danger"
                    ng-click="text.recipient_list.splice($index, 1)">
              <i class="icon-minus-sign icon-white"></i>
            </button>
            <select class="span1 jskomRecipientType" ng-model="recipient.type"
                    ng-options="rt.type as rt.name for rt in recipientTypes"></select>
            
            <jskom:conf-input class="span6" conn="connection" model="recipient.recpt.conf_no">
            </jskom:conf-input>
          </div>
        </fieldset>
      </div>
      
      <p/>
      
      <button class="btn btn-small btn-success"
              ng-click="text.recipient_list.push(newRecipient())">
        <i class="icon-plus-sign icon-white"></i> Recipient
      </button>
      <p/>
      
      <label>Subject</label>
      <input class="span8" type="text" name="subject" ng-model="text.subject" />
    </div>
  </div>
  
  <label>Body</label>
  <textarea class="span8" name="body" rows="5" spellcheck="true"
            ng-model="text.body" jskom-autofocus>
  </textarea>
</div>
