<p ng-show="readerIsLoading">Loading...</p>
<div ng-controller="TextCtrl">
  <div ng-show="reader">
    <h2 class="jskomNoWrap">
      {{ reader.unreadSize() }} unread in
      <a href="/conferences/{{conf.conf_no}}">{{ conf|confName }}</a>
    </h2>
    
    <span ng-show="textIsLoading">Loading...</span>
    <div ng-show="text">
      <ng-include src="'text.html'|jskomTemplate"></ng-include>
    </div>
    <div id="jskomBelowText"></div>
    
    <div class="row">
      <div class="twelve columns">
        <div class="right">
          <span class="alert label" ng-show="text._is_unread == true">Unread</span>
          <span class="success label" ng-show="text._is_unread == false">Read</span>
          &nbsp;
        </div>
        <div style="clear: both;">&nbsp;</div>
      </div>
    </div>
  </div>
  
  <div id="jskomControlBar">
    <div class="row">
      <div class="three mobile-one columns">
        <button type="button" class="secondary button" ng-click="writeComment()">
          <i class="icon-pencil"></i>
          <span>
            <!-- Must nest hide-for-small in span because of "display: inherit" -->
            <span class="hide-for-small">Comment</span>
          </span>
        </button>
      </div>
      
      <div class="three mobile-one columns">
        <div class="secondary button dropdown">
          <i class="icon-cogs"></i>
          <span>
            <span class="hide-for-small">Actions</span>
          </span>
          <ul class="dropdown-menu">
            <li>
              <a ng-click="showCommented()" ng-hide="showCommented == null">Show commented</a>
            </li>
            <li>
              <a ng-click="showAllComments()" ng-hide="showAllComments == null">
                Show all comments
              </a>
            </li>
            <li ng-hide="text._is_unread == false">
              <a ng-click="markAsRead()" ng-disabled="readmarkIsLoading">Mark as read</a>
            </li>
            <li ng-hide="text._is_unread == true">
              <a ng-click="markAsUnread()" ng-disabled="readmarkIsLoading">Mark as unread</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="three mobile-one columns">
      </div>
      
      <div class="three mobile-one columns">
        <button type="submit" class="button right"
                ng-click="readNext()" ng-disabled="!reader || textIsLoading">
          <i class="icon-arrow-right"></i>
          <span>
            <!-- Must nest hide-for-small in span because of "display: inherit" -->
            <span class="hide-for-small">
              <span ng-show="reader.isEmpty()">Conferences</span>
              <span ng-hide="reader.isEmpty()">
                <span ng-show="reader.hasPending()">
                  Show pending ({{ reader.pendingSize() }})
                </span>
                <span ng-hide="reader.hasPending()">Read next</span>
              </span>
            </span>
          </span>
        </button>
      </div>
      
    </div>
  </div>
</div>
